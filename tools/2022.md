# 2022 年终总结
时间过得真快，转眼间 2022 年已经接近尾声，“提笔”回顾过去的一年，除了年龄又大了一岁，却寻不出点滴让人记忆深刻的瞬间，这一年生活过的太过平淡了。从年初的疫情反复，到年中的多点爆发，再到年尾的全面放开，疫情这一年困住了前行的脚步。

## 工作
2022整年的主要工作都在x86 Android的适配上，涉及了UEFI的引导启动、U-boot的分析研究、Android OTA及分区的处理，终于在年终将x86的系统运行在了KFC的设备上。期间也涉及到了很多相关的细节：repo仓库的建立、git操作、uboot的调试方法、kernel的调整编译。对Android在x86上的启动算是有了大体的认识。遇到未知的系统问题没有那么的恐惧了。
### Ark内容的解析播放
这里使用了Android本地渲染的方式替代了KFC原有的网页渲染方式，使得渲染的性能有了巨大提升，对机器的硬件要求变低了，也是能够进入KFC供应的重要一步。同时也有一些值得思考的地方：
- 旧有的基于网页的渲染方式是否过于臃肿、涉及工具过于偏向于开发而不是设计
- 同时有腾讯的PAG动画设计工具在进入类似的领域，是否可以集多家所长优化工具和显示效果
### Android系统
在适配了x86的平台之后不禁想到是否可以在其他的arm平台上进行同样的工作，以减轻其他arm平台适配的成本、减少系统故障及平台差异、并且拉平所有平台的Android版本。随着各大arm厂商在GPU、uboot等关键环节逐渐拥抱开源社区，这些硬件也可以使用最新的开源仓库来支持，不至于所有的升级、安全更新都依赖于具体的板卡厂商。随着设备数量的增多，安全问题在后续将会更加重要。
### Repo仓库
在适配x86平台时，为了能够更方便的进行多台电脑协作开发，并且保留修改历史，构建了基于gitlab的线上仓库，其他arm的仓库后续也使用同样的方法管理会更加的方便。同时，对应的CI工具也需要能够上线，现在还是使用人工打包的方式，不能快速的迭代。对应的Android每月的ASB也需要定期能够跟进，消除系统上的安全漏洞。
## 发展
在接触的众多地方也发现了一些
### x86硬件
随着arm设备硬件性能的逐年提升，后面的设备也越来越贵，性能越来越高，例如rk3588在mini-pc领域也有涉及，价格也与x86平台有所重叠，因此x86的Android系统适配在后续的高性能场景将会更加重要。它能带来：更加灵活的硬件配置、更加充分的硬件市场竞争，可能它在后续的设备中会发挥一些作用，特别在显卡性能要求高，显示输出画面规格要求高的场景。
### 统一AOSP
公司在使用的arm设备中有多个soc相同但是因为不同板卡厂商提供，导致了需要维护多套代码的问题，适配x86时看到arm平台也可以使用基于soc的方式来进行，把板卡厂商的硬件差异缩小在小范围，这样就可以保持多个平台系统的更新，不再受限与具体的板卡厂商，让后续的适配更加快速，较少响应时间。
### 更多的交互场景
在硬件性能充足了之后，交互上就可以有更多的可能，例如：腾讯的PAG在游戏、购物、直播等场景就有很好的案例，我们的大屏幕是否也可以借助它的优势在交互上有些改变。类似稿定的显示效果是否也可以作为参考丰富我们的显示效果。
### Rust
rust在今年的多个场景都有了很好的发展，它能让系统软件的安全bug更少，包括不限于下面的场景：Linux内核、Chrome浏览器、Android系统组件、命令行cli工具。它能带来更安全的执行环境、更好的包管理、更方便的调试测试。我们的软件及工具是否可以获得它的优势，例如在系统组件，播放软件里。

期望今年能够持续的探索。